# 1 模板

## 1.1 模板的概念

模板就是建立通用的模具，大大提高利用性

## 1.2 函数模板

- C++ 的另一种编程思想-泛型编程，主要利用的技术就是模板
- C++提供两种模板机制：函数模板和类模板

### 1.2.1 函数模板语法

函数模板作用：

建立一个通用函数，其函数返回值类型和形参类型可以不用具体指定，用一个虚拟的类型代替。

**语法：**

```cpp
template<typename T>
函数声明或定义
```

**解释：**

- template -- 声明创建模板
- typename -- 表明其后面的符号是一种数据类型， 可以用 class 代替
- T -- 通用的数据类型，名称可以替换，通常为大写字母

**示例：**

```cpp
# include <iostream>
using namespace std;

// 函数模板
// 交换两个值
template<typename T> // 声明一个模板，告诉编译器后面的代码中紧跟着的T不要报错，T是一个通用数据类型
void mySwap(T &a, T &b)
{
    T temp = a;
    a = b;
    b = temp;
}

int main(int argc, char *argv[])
{
    int a = 10;
    int b = 20;
    // 调用模板的两种方式
    // 方式1： 编译器自动类型推导
    // mySwap(a, b);
    // 方式2： 显示指定类型
    mySwap<int>(a, b);
    cout << "a=" << a << endl;
    cout << "b=" << b << endl;
}
```

总结：

- 函数模板利用关键字 template
- 使用函数模板有两种方式：自动类型推导， 显示指定类型
- 模板的目的是为了提高复用性，将类型参数化

### 1.2.2 函数模板注意事项

- 自动类型推导，必须推导出一致的数据类型T, 才可以使用
- 模板必须要确定出T的数据类型，才可以使用

```cpp
# include <iostream>
using namespace std;

// 模板注意事项
// 1. 自动类型推导，必须推导出一致的数据类型T, 才可以使用
// 2. 模板必须要确定出T的数据类型，才可以使用 
template<class T> // typename 可以替换成 class
void mySwap(T &a, T &b)
{
    T temp = a;
    a = b;
    b = temp;
}

template<class T>
void func()
{
    cout << "调用func" << endl;
}

void test01()
{
    int a = 10;
    int b = 20;
    char c = 'c';
    // mySwap(a, c); 报错， 自动类型推导，必须推导出一致的数据类型T, 才可以使用

    // func(); 报错， 模板必须要确定出T的数据类型，才可以使用 
    func<int>();
}

int main(int argc, char *argv[])
{
   test01();
}
```

### 1.2.3 函数模板案例

案例描述:

- 利用函数模板封闭一个排序函数，可以对不同数据类型数组进行排序
- 排序规则为从大到小，排序算法为选择排序
- 分析利用 char 数组和 int 数组进行测试

```cpp
# include <iostream>
using namespace std;

// 模板案例

// 选择排序
template<class T>
void mySort(T arr[], int len)
{
    for(int i=0; i<len; i++)
    {
        int maxIndex = i;
        int max = arr[i];
        for(int j = i+1; j<len; j++)
        {
            if(arr[j] > max)
            {
                maxIndex = j;
                max = arr[j];
            }
        }
        if(i != maxIndex)
        {
            arr[maxIndex] = arr[i];
            arr[i] = max;
        }
    }
}

template<class T>
void printArray(T arr[], int len)
{
    for(int i=0; i<len; i++)
    {
        cout<< arr[i] << " ";
    }
    cout << endl;
}

void test01()
{
    char charArr[] = "bcdea";
    int len = sizeof(charArr)/sizeof(charArr[0]);
    mySort(charArr, len);
    printArray(charArr, len);

    int intArr[] = {2,9,4,8,7,5,1,0,};
    int int_len = sizeof(intArr)/sizeof(intArr[0]);
    mySort(intArr, int_len);
    printArray(intArr, int_len);


}

int main(int argc, char *argv[])
{
   test01();
}
```







## 1.3 类模板



