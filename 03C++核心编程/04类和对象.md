# C++核心编程

## 4 类和对象

C++ 面向对象的三大特性：封装、多态、继承

### 4.1 封装

#### 4.4.1 封装的意义

- **封装的意义一：**

  - 将属性和行为作为一个整体，表现生活上的事物
  - 将属性和行为权限加以控制

  在设计类的时候，属性和行为写在一起表现事物

  示例1

  ```cpp
  # include <iostream>
  using namespace std;
  
  const double PI = 3.14;
  
  // 封装一个圆类
  class Circle
  {
      // 访问权限
      public:
      
      // 属性
      int m_r;
  
      // 行为
      double calculateZC()
      {
          return 2 * PI * m_r;
      }
  };
  
  int main(int argc, char *argv[])
  {
      // 创建圆类对象
      // 实例化: 通过一个类创建一个对象的过程
      Circle circle;
  
      circle.m_r = 10;
  
      cout << "圆的周长为：" << circle.calculateZC() << endl;
  }
  ```

  示例2

  ```cpp
  # include <iostream>
  using namespace std;
  
  // 封装一个学生类
  class Student
  {
      public:
  
      string stu_Name;
      string stu_Id;
  
      void showStudent()
      {
          cout << "姓名：" << stu_Name << "\t";
          cout << "学号：" << stu_Id << endl;
      }
  
      void setName(string name)
      {
          stu_Name = name;
      }
  
      void setId(string id)
      {
          stu_Id = id;
      }
      
  };
  
  int main(int argc, char *argv[])
  {
      Student stu1;
      // 类直接给属性赋值
      stu1.stu_Id = "1";
      stu1.stu_Name = "张三";
      stu1.showStudent();
  
      // 通过类的形为级属性赋值
      Student stu2;
      stu2.setId("2");
      stu2.setName("李四");
      stu2.showStudent();
  }
  ```

  类中的属性有行为，统一称为**成员**

  属性  也称为成员属性或者成员变量

  行为 也行为成员函数或者成员方法

- **封装的意义二：**

  - 类的设计时，可以把属性和行为放在不同的权限下，加以控制。

    访问权限有三种

    | 权限                     | 类内访问 | 类外访问 | 子类访问 |
    | ------------------------ | -------- | -------- | -------- |
    | public          公共权限 | 是       | 是       | 是       |
    | protected    保护权限    | 是       | 否       | 是       |
    | private         私有权限 | 是       | 否       | 否       |

    ```cpp
    # include <iostream>
    using namespace std;
    
    class Person
    {
        public:
        string m_Name;
    
        protected:
        string m_Car;
    
        private:
        int m_password;
    
        public:
        void func()
        {
            m_Name = "张三";
            m_Car = "五菱";
            m_password = 123456;
        }
    };
    
    int main(int argc, char *argv[])
    {
        Person person;
    
        person.m_Name = "李四"; // 只有公共权限的成员才可以访问
        person.func();
        
    }
    ```

#### 4.1.2 struct和class的区别

在C++中， struct 和 class 的唯一区别就在于默认的访问权限不同

区别：

- struct 默认权限为公共

- class 默认权限为私有

  ```cpp
  # include <iostream>
  using namespace std;
  
  class C1
  {
      int m_A; // 默认权限私有
  };
  
  struct C2
  {
      int m_A; // 默认权限是公共
  };
  
  int main(int argc, char *argv[])
  {
      // C1 c1;
      // c1. 私有权限类外不可访问
  
      C2 c2;
      c2.m_A = 100;
  }
  ```

#### 4.1.3 成员属性设置为私有

- 将所有成员属性设置为私有，可以自己控制读写权限
- 对于写权限，我们可以检测数据的有效性

